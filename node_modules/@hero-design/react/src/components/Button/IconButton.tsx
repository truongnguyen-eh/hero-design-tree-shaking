import React from 'react';
import type {
  MouseEvent,
  FocusEvent,
  ReactElement,
  AriaAttributes,
} from 'react';
import { useCss } from '../../utils/hooks';

import { StyledIconButton } from './StyledButton';
import Icon from '../Icon';
import type { IconName } from '../Icon';
import type { CommonProps } from '../common';

export interface IconButtonProps extends CommonProps, AriaAttributes {
  /**
   * Disable state of button.
   */
  disabled?: boolean;
  /**
   * Button's icon name or a custom icon as a react element.
   */
  icon: IconName | ReactElement;
  /**
   * Visual intent color to apply to icon button.
   */
  intent?:
    | 'inherit'
    | 'primary'
    | 'danger'
    | 'success'
    | 'warning'
    | 'error'
    | 'text'
    | 'subdued-text'
    | 'disabled-text';
  /**
   * `blur` event handler.
   */
  onBlur?: (e: FocusEvent) => void;
  /**
   * `click` event handler.
   */
  onClick?: (e: MouseEvent) => void;
  /**
   * `mouseDown` event handler.
   */
  onMouseDown?: (e: MouseEvent) => void;
  /**
   * `mouseEnter` event handler.
   */
  onMouseEnter?: (e: MouseEvent) => void;
  /**
   * `mouseLeave` event handler.
   */
  onMouseLeave?: (e: MouseEvent) => void;
  /**
   * `mouseUp` event handler.
   */
  onMouseUp?: (e: MouseEvent) => void;
  /**
   * Size of button.
   */
  size?: 'small' | 'medium' | 'large';
  /**
   * Specifies the HTML attribute type of button.
   */
  type?: 'submit' | 'reset' | 'button';
}

const IconButton = ({
  icon,
  onClick,
  onBlur,
  onMouseDown,
  onMouseEnter,
  onMouseLeave,
  onMouseUp,
  intent = 'inherit',
  size = 'medium',
  disabled = false,
  type = 'button',
  id,
  className,
  style,
  sx = {},
  'data-test-id': dataTestId,
  ...ariaProps
}: IconButtonProps): ReactElement => (
  <StyledIconButton
    type={type}
    onClick={onClick}
    onBlur={onBlur}
    onMouseDown={onMouseDown}
    onMouseEnter={onMouseEnter}
    onMouseLeave={onMouseLeave}
    onMouseUp={onMouseUp}
    themeSize={size}
    disabled={disabled}
    id={id}
    className={className}
    style={{
      ...style,
      ...useCss(sx),
    }}
    data-test-id={dataTestId}
    {...ariaProps}
  >
    <Icon icon={icon} intent={disabled ? 'disabled-text' : intent} />
  </StyledIconButton>
);

export default IconButton;
