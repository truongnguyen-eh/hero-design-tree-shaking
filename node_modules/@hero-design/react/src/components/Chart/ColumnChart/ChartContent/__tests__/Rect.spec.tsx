import React from 'react';
import renderWithTheme from '../../../../../testUtils/renderWithTheme';
import Rect from '../Rect';

describe('Rect', () => {
  it('should render correctly', () => {
    const { container } = renderWithTheme(<Rect color="red" height={200} />);
    expect(container).toMatchSnapshot();
  });

  it('should run event handlers', () => {
    const onMouseOver = jest.fn();
    const onMouseOut = jest.fn();
    const onMouseMove = jest.fn();
    const onClick = jest.fn();

    const { container } = renderWithTheme(
      <Rect
        color="red"
        height={200}
        onMouseOver={onMouseOver}
        onMouseOut={onMouseOut}
        onMouseMove={onMouseMove}
        onClick={onClick}
      />
    );

    const rect = container.querySelector('rect')!;

    rect.dispatchEvent(new MouseEvent('mouseover', { bubbles: true }));

    expect(onMouseOver).toBeCalledTimes(1);

    rect.dispatchEvent(new MouseEvent('mouseout', { bubbles: true }));

    expect(onMouseOut).toBeCalledTimes(1);

    rect.dispatchEvent(new MouseEvent('mousemove', { bubbles: true }));

    expect(onMouseMove).toBeCalledTimes(1);

    rect.dispatchEvent(new MouseEvent('click', { bubbles: true }));

    expect(onClick).toBeCalledTimes(1);
  });
});
