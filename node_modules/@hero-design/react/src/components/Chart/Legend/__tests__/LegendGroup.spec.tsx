import React from 'react';
import userEvent from '@testing-library/user-event';
import renderWithTheme from '../../../../testUtils/renderWithTheme';
import LegendGroup from '../LegendGroup';

describe('LegendGroup', () => {
  it('renders correctly', () => {
    const { getByTestId, getByText } = renderWithTheme(
      <LegendGroup
        data={['1', '2']}
        getDisplayText={(item) => item}
        getColor={() => 'red'}
      />
    );

    expect(getByTestId('legend-prefix-1-circle')).toBeInTheDocument();
    expect(getByTestId('legend-prefix-2-circle')).toBeInTheDocument();
    expect(getByText('1')).toBeInTheDocument();
    expect(getByText('2')).toBeInTheDocument();
  });

  it('renders correctly when set maxLegend', () => {
    const { getByTestId, getByText, queryByTestId, queryByText } =
      renderWithTheme(
        <LegendGroup
          data={['1', '2']}
          getDisplayText={(item) => item}
          getColor={() => 'red'}
          maxLegend={1}
        />
      );

    expect(getByTestId('legend-prefix-1-circle')).toBeInTheDocument();
    expect(queryByTestId('legend-prefix-2-circle')).not.toBeInTheDocument();
    expect(getByText('1')).toBeInTheDocument();
    expect(queryByText('2')).not.toBeInTheDocument();
    expect(getByText('More')).toBeInTheDocument();
  });

  it('display view more items with vertical', () => {
    const { getByTestId } = renderWithTheme(
      <LegendGroup
        data={['1', '2']}
        getDisplayText={(item) => item}
        getColor={() => 'red'}
        maxLegend={0}
        viewMoreDirection="vertical"
      />
    );
    userEvent.hover(getByTestId('legend-view-more-text'));

    expect(getByTestId('legend-view-more-wrapper')).toHaveStyle(`
    flex-direction: column;
    `);
  });
});
