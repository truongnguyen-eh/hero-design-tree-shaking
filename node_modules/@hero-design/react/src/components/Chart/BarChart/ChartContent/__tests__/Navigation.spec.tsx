import React from 'react';
import userEvent from '@testing-library/user-event';
import renderWithTheme from '../../../../../testUtils/renderWithTheme';

import Navigation from '../Navigation';

describe('Navigation', () => {
  it('should render correctly', () => {
    const { container, getByTestId } = renderWithTheme(
      <Navigation
        top={300}
        left={200}
        onClickNavigation={jest.fn()}
        data-test-id="navigation"
      />
    );
    expect(container).toMatchSnapshot();
    expect(getByTestId('navigation-navigate-button-prev')).toBeInTheDocument();
    expect(getByTestId('navigation-navigate-button-next')).toBeInTheDocument();
  });

  it('should on click navigation', () => {
    const onNavigate = jest.fn();

    const { getByTestId } = renderWithTheme(
      <Navigation
        top={300}
        left={200}
        onClickNavigation={onNavigate}
        data-test-id="navigation"
      />
    );
    userEvent.click(getByTestId('navigation-navigate-button-prev'));
    userEvent.click(getByTestId('navigation-navigate-button-next'));
    expect(onNavigate).toBeCalledTimes(2);
  });

  it.each`
    disabledDirection | enabledDirection
    ${'prev'}         | ${'next'}
    ${'next'}         | ${'prev'}
  `('should disable prev button', ({ disabledDirection, enabledDirection }) => {
    const onNavigate = jest.fn();
    const { getByTestId } = renderWithTheme(
      <Navigation
        top={300}
        left={200}
        onClickNavigation={onNavigate}
        data-test-id="navigation"
        disabledButtons={disabledDirection}
      />
    );

    const disableButton = getByTestId(
      `navigation-navigate-button-${disabledDirection}`
    );

    expect(disableButton).toBeVisible();
    expect(disableButton).toBeDisabled();

    userEvent.click(disableButton!);

    expect(onNavigate).toBeCalledTimes(0);

    const enabledButton = getByTestId(
      `navigation-navigate-button-${enabledDirection}`
    );

    expect(enabledButton).toBeVisible();
    expect(enabledButton).toBeEnabled();

    userEvent.click(enabledButton);

    expect(onNavigate).toBeCalledTimes(1);
  });
});
