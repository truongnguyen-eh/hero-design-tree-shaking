import React from 'react';
import renderWithTheme from '../../../../../testUtils/renderWithTheme';

import BarTooltip from '../BarTooltip';

describe('BarTooltip', () => {
  it('should render correctly', () => {
    const { getByText, container } = renderWithTheme(
      <BarTooltip show color="red" title="07th" value={2.2} />
    );
    expect(container).toMatchSnapshot();

    expect(getByText('07th')).toBeInTheDocument();
  });

  it('render with customized tooltip', () => {
    const tooltipRender = jest.fn();
    const { getByText } = renderWithTheme(
      <BarTooltip
        show
        color="red"
        title="07th"
        value={2.2}
        percent={20}
        yAxisLabel="label"
        tooltipRenderer={(params) => {
          tooltipRender(params);
          return <div>Customized tooltip</div>;
        }}
      />
    );

    expect(getByText('Customized tooltip')).toBeInTheDocument();
    expect(tooltipRender).toBeCalledTimes(1);
    expect(tooltipRender).toBeCalledWith({
      yAxisLabel: 'label',
      label: '07th',
      legendColor: 'red',
      value: 2.2,
    });
  });
});
