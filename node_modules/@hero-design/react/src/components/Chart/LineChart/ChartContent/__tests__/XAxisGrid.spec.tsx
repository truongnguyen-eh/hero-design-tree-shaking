import React from 'react';
import renderWithTheme from '../../../../../testUtils/renderWithTheme';
import XAxisGrid from '../XAxisGrid';

describe('XAxisGrid', () => {
  it('should render', () => {
    const wrapper = renderWithTheme(
      <XAxisGrid
        width={960}
        height={480}
        xAxisConfig={{
          labels: ['Jan', 'Feb', 'Mar'],
        }}
      />
    );
    expect(wrapper.container).toMatchSnapshot();

    expect(wrapper.queryAllByTestId('x-axis-grid-line')).toHaveLength(3);

    const expectedXAxisGridLines = [
      {
        x1: 0,
        y1: 0,
        x2: 0,
        y2: 480,
      },
      {
        x1: 480,
        y1: 0,
        x2: 480,
        y2: 480,
      },
      {
        x1: 960,
        y1: 0,
        x2: 960,
        y2: 480,
      },
    ];

    wrapper.queryAllByTestId('x-axis-grid-line').forEach((gElement, index) => {
      const line = gElement.querySelector('line');
      expect(line).toHaveAttribute(
        'x1',
        String(expectedXAxisGridLines[index].x1)
      );
      expect(line).toHaveAttribute(
        'y1',
        String(expectedXAxisGridLines[index].y1)
      );
      expect(line).toHaveAttribute(
        'x2',
        String(expectedXAxisGridLines[index].x2)
      );
      expect(line).toHaveAttribute(
        'y2',
        String(expectedXAxisGridLines[index].y2)
      );
    });
  });
});
