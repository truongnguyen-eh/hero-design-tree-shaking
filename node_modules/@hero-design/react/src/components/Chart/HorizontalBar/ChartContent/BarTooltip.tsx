import React, { forwardRef } from 'react';
import { StyledTooltip } from '../../StyledChart';
import { StyledTooltipContentWrapper } from '../StyledHorizontalBarChart';
import { StyledLegendCircle } from '../../Legend/StyledLegend';
import Typography from '../../../Typography';
import { CommonProps } from '../../../common';

interface BarTooltipProps extends CommonProps {
  show?: boolean;
  color?: string;
  title?: string;
  value?: string | number;
}

const BarTooltip = forwardRef<HTMLDivElement, BarTooltipProps>(
  ({ show, 'data-test-id': dataTestId, color, title, value }, ref) => {
    return (
      <StyledTooltip
        ref={ref}
        style={{ position: 'fixed', display: show ? 'block' : 'none' }}
        data-test-id={`${dataTestId}-tooltip`}
        variant="light"
      >
        {show && (
          <StyledTooltipContentWrapper>
            {color && <StyledLegendCircle themeColor={color} />}
            <Typography.Text
              fontSize={14}
              fontWeight="light"
              intent="subdued"
              tagName="span"
            >
              {title}
            </Typography.Text>
            <Typography.Text fontSize={14} fontWeight="light" tagName="span">
              {value}
            </Typography.Text>
          </StyledTooltipContentWrapper>
        )}
      </StyledTooltip>
    );
  }
);

export default BarTooltip;
