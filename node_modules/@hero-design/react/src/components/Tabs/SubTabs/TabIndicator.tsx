import React, { useState, useLayoutEffect } from 'react';

import { ActiveTabIndicator } from './StyledSubTabs';

const TabIndicator = ({
  selectedIndex,
  tabWidths,
}: {
  selectedIndex: number;
  tabWidths: string[];
}) => {
  const [indicatorWidth, setIndicatorWidth] = useState<string>();
  const [indicatorLeft, setIndicatorLeft] = useState<string>();

  useLayoutEffect(() => {
    setIndicatorWidth(tabWidths[selectedIndex]);
    setIndicatorLeft(
      selectedIndex === 0
        ? '0'
        : `calc(${tabWidths.slice(0, selectedIndex).join(' + ')})`
    );
  }, [selectedIndex, tabWidths]);

  return (
    <ActiveTabIndicator
      data-test-id="active-tab-indicator"
      style={{ width: indicatorWidth, left: indicatorLeft }}
    />
  );
};

export default TabIndicator;
