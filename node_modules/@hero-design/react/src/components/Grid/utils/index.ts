import type { FlattenSimpleInterpolation } from 'styled-components';
import { breakpoints } from '../../../utils/responsiveBreakpoints';
import theme from '../../../theme';

const BREAKPOINT_TO_INDEX = {
  small: 1,
  medium: 2,
  large: 3,
  xlarge: 4,
} as const;

export const mapBreakpointCss = <T>(
  array: [T, T, T, T, T],
  fn: (value: T) => string | FlattenSimpleInterpolation
) => {
  return `
    ${fn(array[0])}
    ${breakpoints
      .map(
        (bp) => `
          @media (min-width: ${theme.breakpoints[bp]}) {
            ${fn(array[BREAKPOINT_TO_INDEX[bp]])}
          }
        `
      )
      .join('')}
  `;
};
