import React, { useContext } from 'react';
import ReactDOM from 'react-dom';

import type { ReactElement } from 'react';
import FiltersContext from './FiltersContext';
import Tag from '../../Tag';

const SelectedTag = ({
  label,
  value,
  onRemove,
}: {
  label?: string;
  onRemove?: () => void;
  value: string | ReactElement;
}) => {
  const { selectedTagsRef } = useContext(FiltersContext);

  if (selectedTagsRef.current === null) return null;

  return ReactDOM.createPortal(
    <Tag
      sx={{
        bgColor: 'violet-light-90',
        borderColor: 'violet-light-90',
        mr: 'small',
      }}
      data-test-id={`filter-value-tag-${label}`}
      text={
        <span style={{ margin: 0, padding: 0 }}>
          {label !== undefined && `${label}: `}
          <strong>{value}</strong>
        </span>
      }
      onRemove={onRemove}
    />,
    selectedTagsRef.current
  );
};

export default SelectedTag;
